<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UPA Summer Championship Player List</title>
  <link rel="stylesheet" href="../styles/main.css">
  <style>
    .container {
      max-width: 1000px;
    }
    .filter-bar {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin: 2rem 0;
      flex-wrap: wrap;
    }
    .filter-bar select, .filter-bar input {
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-size: 1rem;
      border: 1px solid #444;
      background-color: #2A2D3E;
      color: white;
      min-width: 200px;
    }
    .note {
      text-align: center;
      color: #aaa;
      font-style: italic;
      margin: 1rem 0;
    }
    #playerTable {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
    }
    #playerTable th, #playerTable td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid #444;
    }
    #playerTable th {
      background-color: #2A2D3E;
      color: #FF2457;
      font-weight: bold;
    }
    #playerTable tr:hover {
      background-color: #2A2D3E;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid #444;
    }
    th {
      background: #2C2F45;
      color: #FF2457;
    }
    tr:nth-child(even) {
      background: #2a2a2a;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üèÄ Registered Players</h1>
    
    <div class="filter-bar">
      <select id="positionFilter" onchange="filterTable()" class="form-control">
        <option value="">All Positions</option>
        <option value="PG">Point Guard (PG)</option>
        <option value="SG">Shooting Guard (SG)</option>
        <option value="SF">Small Forward (SF)</option>
        <option value="PF">Power Forward (PF)</option>
        <option value="C">Center (C)</option>
      </select>
      
      <select id="tierFilter" onchange="filterTable()" class="form-control">
        <option value="">All Tiers</option>
        <option value="S">S Tier</option>
        <option value="A">A Tier</option>
        <option value="B">B Tier</option>
        <option value="C">C Tier</option>
      </select>
      
      <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Search players..." class="form-control">
    </div>
    
    <div id="table-container" class="section">
      <!-- Table will be inserted here by JavaScript -->
    </div>
    
    <p class="note">Last updated: <span id="lastUpdated">Loading...</span></p>
    
    <div class="nav-container">
      <a href="../index.html" class="btn">‚Üê Back to Home</a>
    </div>
  </div>

  <script src="https://unpkg.com/papaparse@5.3.2/papaparse.min.js"></script>
  <script>
    const sheetURL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSGAl8b_BRQLabFmtkLvvaW2wgBZGQsCQjkkCdHnBvdk0OYKFvUj-gOZVahYymGQZquVDHYHxAENqfC/pub?output=csv';
    let allPlayers = [];

    function renderTable(data) {
      const tbody = document.querySelector('#playerTable tbody');
      tbody.innerHTML = '';
      data.forEach(row => {
        const tr = document.createElement('tr');
        row.forEach(cell => {
          const td = document.createElement('td');
          td.textContent = cell;
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      });
    }

    function filterTable() {
      const pos = document.getElementById('position').value;
      if (!pos) return renderTable(allPlayers);
      const filtered = allPlayers.filter(row => row[4] && row[4].toLowerCase().includes(pos.toLowerCase()));
      renderTable(filtered);
    }

    Papa.parse(sheetURL, {
      download: true,
      header: false,
      complete: function(results) {
        allPlayers = results.data.slice(1).filter(row => row.length >= 6);
        renderTable(allPlayers);
      }
    });
  </script>
</body>
</html>
